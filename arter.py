# Â©ï¸ nnnrodnoy, 2025
# ğŸ’¬ @nnnrodnoy
# This file is part of Huekka
# ğŸŒ https://github.com/nnnrodnoy/Huekka/
# You can redistribute it and/or modify it under the terms of the MIT License
# ğŸ”‘ https://opensource.org/licenses/MIT
import os
import re
import random
from pathlib import Path

# Ğ’ÑĞµ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ñ„Ğ¾Ğ½Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
BACKGROUND_CHARS = {
    # Ğ‘Ğ»Ğ¾ĞºĞ¾Ğ²Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'â–„', 'â–€', 'â–Œ', 'â–', 'â– ', 'â–¡', 'â–ª', 'â–«', 'â–¬', 'â–²', 'â–¼', 'â—†', 'â—', 'â—‹',
    'â—˜', 'â—™', 'â—¦', 'â—Œ', 'â—', 'â—', 'â—', 'â—‘', 'â—’', 'â—“', 'â—”', 'â—•', 'â—–', 'â——',
    'â—¢', 'â—£', 'â—¤', 'â—¥', 'â—§', 'â—¨', 'â—©', 'â—ª', 'â—«', 'â—¬', 'â—­', 'â—®', 'â—¯',
    
    # Ğ›Ğ¸Ğ½ĞµĞ¹Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'â”€', 'â”', 'â”‚', 'â”ƒ', 'â”„', 'â”…', 'â”†', 'â”‡', 'â”ˆ', 'â”‰', 'â”Š', 'â”‹', 'â”Œ', 'â”',
    'â”', 'â”', 'â”', 'â”‘', 'â”’', 'â”“', 'â””', 'â”•', 'â”–', 'â”—', 'â”˜', 'â”™', 'â”š', 'â”›',
    'â”œ', 'â”', 'â”', 'â”Ÿ', 'â” ', 'â”¡', 'â”¢', 'â”£', 'â”¤', 'â”¥', 'â”¦', 'â”§', 'â”¨', 'â”©',
    'â”ª', 'â”«', 'â”¬', 'â”­', 'â”®', 'â”¯', 'â”°', 'â”±', 'â”²', 'â”³', 'â”´', 'â”µ', 'â”¶', 'â”·',
    'â”¸', 'â”¹', 'â”º', 'â”»', 'â”¼', 'â”½', 'â”¾', 'â”¿', 'â•€', 'â•', 'â•‚', 'â•ƒ', 'â•„', 'â•…',
    'â•†', 'â•‡', 'â•ˆ', 'â•‰', 'â•Š', 'â•‹', 'â•Œ', 'â•', 'â•', 'â•', 'â•', 'â•‘', 'â•’', 'â•“',
    'â•”', 'â••', 'â•–', 'â•—', 'â•˜', 'â•™', 'â•š', 'â•›', 'â•œ', 'â•', 'â•', 'â•Ÿ', 'â• ', 'â•¡',
    'â•¢', 'â•£', 'â•¤', 'â•¥', 'â•¦', 'â•§', 'â•¨', 'â•©', 'â•ª', 'â•«', 'â•¬', 'Â¥',
    
    # ĞœĞ°Ñ‚ĞµĞ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'âˆ©', 'âˆª', 'âˆš', 'âˆ', 'â‰ˆ', 'â‰ ', 'â‰¡', 'â‰¤', 'â‰¥', 'âŒ ', 'âŒ¡', 'âˆ«', 'âˆ´', 'âˆµ',
    'âˆ·', 'âˆ', 'âˆ®', 'âˆ¯', 'âˆ°', 'âˆ±', 'âˆ²', 'âˆ³', 'âˆ€', 'âˆ‚', 'âˆƒ', 'âˆ„', 'âˆ…', 'âˆ†',
    'âˆ‡', 'âˆˆ', 'âˆ‰', 'âˆŠ', 'âˆ‹', 'âˆŒ', 'âˆ', 'âˆ', 'âˆ', 'âˆ', 'âˆ‘', 'âˆ’', 'âˆ“', 'âˆ”',
    'âˆ•', 'âˆ–', 'âˆ—', 'âˆ˜', 'âˆ™', 'âˆš', 'âˆ›', 'âˆœ', 'âˆ', 'âˆ', 'âˆŸ', 'âˆ ', 'âˆ¡', 'âˆ¢',
    'âˆ£', 'âˆ¤', 'âˆ¥', 'âˆ¦', 'âˆ§', 'âˆ¨', 'âˆ©', 'âˆª', 'âˆ«', 'âˆ¬', 'âˆ­', 'âˆ®', 'âˆ¯', 'âˆ°',
    'âˆ±', 'âˆ²', 'âˆ³', 'âˆ´', 'âˆµ', 'âˆ¶', 'âˆ·', 'âˆ¸', 'âˆ¹', 'âˆº', 'âˆ»', 'âˆ¼', 'âˆ½', 'âˆ¾',
    'âˆ¿', 'â‰€', 'â‰', 'â‰‚', 'â‰ƒ', 'â‰„', 'â‰…', 'â‰†', 'â‰‡', 'â‰ˆ', 'â‰‰', 'â‰Š', 'â‰‹', 'â‰Œ',
    'â‰', 'â‰', 'â‰', 'â‰', 'â‰‘', 'â‰’', 'â‰“', 'â‰”', 'â‰•', 'â‰–', 'â‰—', 'â‰˜', 'â‰™', 'â‰š',
    'â‰›', 'â‰œ', 'â‰', 'â‰', 'â‰Ÿ', 'â‰ ', 'â‰¡', 'â‰¢', 'â‰£', 'â‰¤', 'â‰¥', 'â‰¦', 'â‰§', 'â‰¨',
    'â‰©', 'â‰ª', 'â‰«', 'â‰¬', 'â‰­', 'â‰®', 'â‰¯', 'â‰°', 'â‰±', 'â‰²', 'â‰³', 'â‰´', 'â‰µ', 'â‰¶',
    'â‰·', 'â‰¸', 'â‰¹', 'â‰º', 'â‰»', 'â‰¼', 'â‰½', 'â‰¾', 'â‰¿', 'âŠ€', 'âŠ', 'âŠ‚', 'âŠƒ', 'âŠ„',
    'âŠ…', 'âŠ†', 'âŠ‡', 'âŠˆ', 'âŠ‰', 'âŠŠ', 'âŠ‹', 'âŠŒ', 'âŠ', 'âŠ', 'âŠ', 'âŠ', 'âŠ‘', 'âŠ’',
    'âŠ“', 'âŠ”', 'âŠ•', 'âŠ–', 'âŠ—', 'âŠ˜', 'âŠ™', 'âŠš', 'âŠ›', 'âŠœ', 'âŠ', 'âŠ', 'âŠŸ', 'âŠ ',
    'âŠ¡', 'âŠ¢', 'âŠ£', 'âŠ¤', 'âŠ¥', 'âŠ¦', 'âŠ§', 'âŠ¨', 'âŠ©', 'âŠª', 'âŠ«', 'âŠ¬', 'âŠ­', 'âŠ®',
    'âŠ¯', 'âŠ°', 'âŠ±', 'âŠ²', 'âŠ³', 'âŠ´', 'âŠµ', 'âŠ¶', 'âŠ·', 'âŠ¸', 'âŠ¹', 'âŠº', 'âŠ»', 'âŠ¼',
    'âŠ½', 'âŠ¾', 'âŠ¿', 'â‹€', 'â‹', 'â‹‚', 'â‹ƒ', 'â‹„', 'â‹…', 'â‹†', 'â‹‡', 'â‹ˆ', 'â‹‰', 'â‹Š',
    'â‹‹', 'â‹Œ', 'â‹', 'â‹', 'â‹', 'â‹', 'â‹‘', 'â‹’', 'â‹“', 'â‹”', 'â‹•', 'â‹–', 'â‹—', 'â‹˜',
    'â‹™', 'â‹š', 'â‹›', 'â‹œ', 'â‹', 'â‹', 'â‹Ÿ', 'â‹ ', 'â‹¡', 'â‹¢', 'â‹£', 'â‹¤', 'â‹¥', 'â‹¦',
    'â‹§', 'â‹¨', 'â‹©', 'â‹ª', 'â‹«', 'â‹¬', 'â‹­', 'â‹®', 'â‹¯', 'â‹°', 'â‹±', 'â‹²', 'â‹³', 'â‹´',
    'â‹µ', 'â‹¶', 'â‹·', 'â‹¸', 'â‹¹', 'â‹º', 'â‹»', 'â‹¼', 'â‹½', 'â‹¾', 'â‹¿',
    
    # Ğ Ğ°Ğ·Ğ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'Âµ', 'Â¶', 'Â§', 'Â¬', 'Â¤', 'Â¦', 'Â¨', 'Â©', 'Âª', 'Â«', 'Â®', 'Â¯', 'Â°', 'Â±',
    'Â²', 'Â³', 'Â´', 'Â·', 'Â¸', 'Â¹', 'Âº', 'Â»', 'Â¼', 'Â½', 'Â¾', 'Â¿', 'Ã€', 'Ã',
    'Ã‚', 'Ãƒ', 'Ã„', 'Ã…', 'Ã†', 'Ã‡', 'Ãˆ', 'Ã‰', 'ÃŠ', 'Ã‹', 'ÃŒ', 'Ã', 'Ã', 'Ã',
    'Ã', 'Ã‘', 'Ã’', 'Ã“', 'Ã”', 'Ã•', 'Ã–', 'Ã—', 'Ã˜', 'Ã™', 'Ãš', 'Ã›', 'Ãœ', 'Ã',
    'Ã', 'ÃŸ', 'Ã ', 'Ã¡', 'Ã¢', 'Ã£', 'Ã¤', 'Ã¥', 'Ã¦', 'Ã§', 'Ã¨', 'Ã©', 'Ãª', 'Ã«',
    'Ã¬', 'Ã­', 'Ã®', 'Ã¯', 'Ã°', 'Ã±', 'Ã²', 'Ã³', 'Ã´', 'Ã•', 'Ã¶', 'Ã·', 'Ã¸', 'Ã¹',
    'Ãº', 'Ã»', 'Ã¼', 'Ã½', 'Ã¾', 'Ã¿', 'Ä€', 'Ä', 'Ä‚', 'Äƒ', 'Ä„', 'Ä…', 'Ä†', 'Ä‡',
    'Äˆ', 'Ä‰', 'ÄŠ', 'Ä‹', 'ÄŒ', 'Ä', 'Ä', 'Ä', 'Ä', 'Ä‘', 'Ä’', 'Ä“', 'Ä”', 'Ä•',
    'Ä–', 'Ä—', 'Ä˜', 'Ä™', 'Äš', 'Ä›', 'Äœ', 'Ä', 'Ä', 'ÄŸ', 'Ä ', 'Ä¡', 'Ä¢', 'Ä£',
    'Ä¤', 'Ä¥', 'Ä¦', 'Ä§', 'Ä¨', 'Ä©', 'Äª', 'Ä«', 'Ä¬', 'Ä­', 'Ä®', 'Ä¯', 'Ä°', 'Ä±',
    'Ä²', 'Ä³', 'Ä´', 'Äµ', 'Ä¶', 'Ä¶', 'Ä·', 'Ä¸', 'Ä¹', 'Äº', 'Ä»', 'Ä¼', 'Ä½', 'Ä¾',
    'Ä¿', 'Å€', 'Å', 'Å‚', 'Åƒ', 'Å„', 'Å…', 'Å†', 'Å‡', 'Åˆ', 'Å‰', 'ÅŠ', 'Å‹', 'ÅŒ',
    'Å', 'Å', 'Å', 'Å', 'Å‘', 'Å’', 'Å“', 'Å”', 'Å•', 'Å–', 'Å—', 'Å˜', 'Å™', 'Åš',
    'Å›', 'Åœ', 'Å', 'Å', 'ÅŸ', 'Å ', 'Å¡', 'Å¢', 'Å£', 'Å¤', 'Å¥', 'Å¦', 'Å§', 'Å¨',
    'Å©', 'Åª', 'Å«', 'Å¬', 'Å­', 'Å®', 'Å¯', 'Å°', 'Å±', 'Å²', 'Å³', 'Å´', 'Åµ', 'Å¶',
    'Å·', 'Å¸', 'Å¹', 'Åº', 'Å»', 'Å¼', 'Å½', 'Å¾', 'Å¿', 'Æ€', 'Æ', 'Æ‚', 'Æƒ', 'Æ„',
    'Æ…', 'Æ†', 'Æ‡', 'Æˆ', 'Æ‰', 'ÆŠ', 'Æ‹', 'ÆŒ', 'Æ', 'Æ', 'Æ', 'Æ', 'Æ‘', 'Æ’',
    'Æ“', 'Æ”', 'Æ•', 'Æ–', 'Æ—', 'Æ˜', 'Æ™', 'Æš', 'Æ›', 'Æœ', 'Æ', 'Æ', 'ÆŸ', 'Æ ',
    'Æ¡', 'Æ¢', 'Æ£', 'Æ¤', 'Æ¥', 'Æ¦', 'Æ§', 'Æ¨', 'Æ©', 'Æª', 'Æ«', 'Æ¬', 'Æ­', 'Æ®',
    'Æ¯', 'Æ°', 'Æ±', 'Æ²', 'Æ³', 'Æ´', 'Æµ', 'Æ¶', 'Æ·', 'Æ¸', 'Æ¹', 'Æº', 'Æ»', 'Æ¼',
    'Æ½', 'Æ¾', 'Æ¿', 'Ç€', 'Ç', 'Ç‚', 'Çƒ', 'Ç„', 'Ç…', 'Ç†', 'Ç‡', 'Çˆ', 'Ç‰', 'ÇŠ',
    'Ç‹', 'ÇŒ', 'Ç', 'Ç', 'Ç', 'Ç', 'Ç‘', 'Ç’', 'Ç“', 'Ç”', 'Ç•', 'Ç–', 'Ç—', 'Ç˜',
    'Ç™', 'Çš', 'Ç›', 'Çœ', 'Ç', 'Ç', 'ÇŸ', 'Ç ', 'Ç¡', 'Ç¢', 'Ç£', 'Ç¤', 'Ç¥', 'Ç¦',
    'Ç§', 'Ç¨', 'Ç©', 'Çª', 'Ç«', 'Ç¬', 'Ç­', 'Ç®', 'Ç¯', 'Ç°', 'Ç±', 'Ç²', 'Ç³', 'Ç´',
    'Çµ', 'Ç¶', 'Ç·', 'Ç¸', 'Ç¹', 'Çº', 'Ç»', 'Ç¼', 'Ç½', 'Ç¾', 'Ç¿', 'È€', 'È', 'È‚',
    'Èƒ', 'È„', 'È…', 'È†', 'È‡', 'Èˆ', 'È‰', 'ÈŠ', 'È‹', 'ÈŒ', 'È', 'È', 'È', 'È',
    'È‘', 'È’', 'È“', 'È”', 'È•', 'È–', 'È—', 'È˜', 'È™', 'Èš', 'È›', 'Èœ', 'È', 'È',
    'ÈŸ', 'È ', 'È¡', 'È¢', 'È£', 'È¤', 'È¥', 'È¦', 'È§', 'È¨', 'È©', 'Èª', 'È«', 'È¬',
    'È­', 'È®', 'È¯', 'È°', 'È±', 'È²', 'È³', 'È´', 'Èµ', 'È¶', 'È·', 'È¸', 'È¹', 'Èº',
    'È»', 'È¼', 'È½', 'È¾', 'È¿', 'É€', 'É', 'É‚', 'Éƒ', 'É„', 'É…', 'É†', 'É‡', 'Éˆ',
    'É‰', 'ÉŠ', 'É‹', 'ÉŒ', 'É', 'É', 'É',
    
    # Ğ“Ñ€ĞµÑ‡ĞµÑĞºĞ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'Î±', 'Î²', 'Î³', 'Î´', 'Îµ', 'Î¶', 'Î·', 'Î¸', 'Î¹', 'Îº', 'Î»', 'Î¼', 'Î½', 'Î¾',
    'Î¿', 'Ï€', 'Ï', 'Ï‚', 'Ïƒ', 'Ï„', 'Ï…', 'Ï†', 'Ï‡', 'Ïˆ', 'Ï‰', 'Î‘', 'Î’', 'Î“',
    'Î”', 'Î•', 'Î–', 'Î—', 'Î˜', 'Î™', 'Îš', 'Î›', 'Îœ', 'Î', 'Î', 'ÎŸ', 'Î ', 'Î¡',
    'Î£', 'Î¤', 'Î¥', 'Î¦', 'Î§', 'Î¨', 'Î©',
    
    # Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
    'âŒ', 'â•§', 'â•™', 'â•«'  # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ñ‹ Ğ½Ğ¾Ğ²Ñ‹Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹
}

def convert_color(match):
    """ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ Ñ†Ğ²ĞµÑ‚Ğ½Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸ Ğ² ANSI escape sequences"""
    hex_color = match.group(1).lower()
    text = match.group(2)
    
    # Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ²ÑĞµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ñ„Ğ¾Ğ½Ğ° Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ±ĞµĞ»Ñ‹
    for char in BACKGROUND_CHARS:
        text = text.replace(char, ' ')
    return f"\033[38;2;{int(hex_color[0:2], 16)};{int(hex_color[2:4], 16)};{int(hex_color[4:6], 16)}m{text}"

def print_random_art():
    """Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğ¹ ASCII Ğ°Ñ€Ñ‚ Ğ¸Ğ· Ğ¿Ğ°Ğ¿ĞºĞ¸ arts"""
    arts_dir = Path("arts")
    if not arts_dir.exists():
        return False
        
    # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ²ÑĞµ txt Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ² Ğ¿Ğ°Ğ¿ĞºĞµ arts
    art_files = list(arts_dir.glob("*.txt"))
    if not art_files:
        return False
        
    # Ğ’Ñ‹Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ ÑĞ»ÑƒÑ‡Ğ°Ğ¹Ğ½Ñ‹Ğ¹ Ñ„Ğ°Ğ¹Ğ»
    art_file = random.choice(art_files)
    
    try:
        with open(art_file, 'r', encoding='utf-8') as f:
            for line in f:
                # Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸
                stripped_line = line.rstrip('\n')
                # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ²ÑĞµ Ñ‚ĞµĞ³Ğ¸, ĞºÑ€Ğ¾Ğ¼Ğµ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ñ…
                stripped_line = re.sub(r'\[(?!color)[^]]*\]', '', stripped_line)
                stripped_line = re.sub(r'\[/color\]', '', stripped_line)
                
                # ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸
                stripped_line = re.sub(
                    r'\[color=#([0-9a-f]{6})\](.*?)(?=\[color=|$)',
                    convert_color,
                    stripped_line,
                    flags=re.IGNORECASE
                )
                
                # Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ¾ÑÑ‚Ğ°Ğ²ÑˆĞ¸ĞµÑÑ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ñ„Ğ¾Ğ½Ğ°
                for char in BACKGROUND_CHARS:
                    stripped_line = stripped_line.replace(char, ' ')
                
                # Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ğ¼ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ°Ñ€Ñ‚Ğ°
                print(stripped_line + "\033[0m")
        return True
    except Exception as e:
        print(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ°Ñ€Ñ‚Ğ°: {str(e)}")
        return False

def print_specific_art(art_name):
    """Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ñ‚ ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ñ‹Ğ¹ Ğ°Ñ€Ñ‚ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°"""
    art_path = Path("arts") / f"{art_name}.txt"
    if not art_path.exists():
        return False
        
    try:
        with open(art_path, 'r', encoding='utf-8') as f:
            for line in f:
                # Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ» Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸
                stripped_line = line.rstrip('\n')
                # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ Ğ²ÑĞµ Ñ‚ĞµĞ³Ğ¸, ĞºÑ€Ğ¾Ğ¼Ğµ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ñ…
                stripped_line = re.sub(r'\[(?!color)[^]]*\]', '', stripped_line)
                stripped_line = re.sub(r'\[/color\]', '', stripped_line)
                
                # ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ Ñ†Ğ²ĞµÑ‚Ğ¾Ğ²Ñ‹Ğµ Ğ±Ğ»Ğ¾ĞºĞ¸
                stripped_line = re.sub(
                    r'\[color=#([0-9a-f]{6})\](.*?)(?=\[color=|$)',
                    convert_color,
                    stripped_line,
                    flags=re.IGNORECASE
                )
                
                # Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ¾ÑÑ‚Ğ°Ğ²ÑˆĞ¸ĞµÑÑ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹ Ñ„Ğ¾Ğ½Ğ°
                for char in BACKGROUND_CHARS:
                    stripped_line = stripped_line.replace(char, ' ')
                
                # Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ğ¼ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ°Ñ€Ñ‚Ğ°
                print(stripped_line + "\033[0m")
        return True
    except Exception as e:
        print(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ Ğ°Ñ€Ñ‚Ğ°: {str(e)}")
        return False
